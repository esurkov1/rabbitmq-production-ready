
> rabbitmq-production-ready@1.0.1 test
> node --test test/*.test.js

TAP version 13
# Subtest: should create client instance
ok 1 - should create client instance
  ---
  duration_ms: 1.22025
  type: 'test'
  ...
# Subtest: should validate connection string
ok 2 - should validate connection string
  ---
  duration_ms: 0.242667
  type: 'test'
  ...
# Subtest: should validate retry config
ok 3 - should validate retry config
  ---
  duration_ms: 0.104042
  type: 'test'
  ...
# Subtest: should validate DLQ config
ok 4 - should validate DLQ config
  ---
  duration_ms: 0.06225
  type: 'test'
  ...
# Subtest: should have DLQ disabled by default
ok 5 - should have DLQ disabled by default
  ---
  duration_ms: 0.221375
  type: 'test'
  ...
# Subtest: should enable DLQ when explicitly set
ok 6 - should enable DLQ when explicitly set
  ---
  duration_ms: 0.219417
  type: 'test'
  ...
# Subtest: should have default retry enabled
ok 7 - should have default retry enabled
  ---
  duration_ms: 0.195375
  type: 'test'
  ...
# Subtest: should generate correlation ID
ok 8 - should generate correlation ID
  ---
  duration_ms: 0.193
  type: 'test'
  ...
# Subtest: should get correlation ID from options
ok 9 - should get correlation ID from options
  ---
  duration_ms: 0.362666
  type: 'test'
  ...
# Subtest: should calculate retry delay
ok 10 - should calculate retry delay
  ---
  duration_ms: 0.433
  type: 'test'
  ...
# Subtest: should cap retry delay at max
ok 11 - should cap retry delay at max
  ---
  duration_ms: 0.244708
  type: 'test'
  ...
# Subtest: should get connection info
ok 12 - should get connection info
  ---
  duration_ms: 0.51125
  type: 'test'
  ...
# Subtest: should get all consumers
ok 13 - should get all consumers
  ---
  duration_ms: 0.163
  type: 'test'
  ...
# Subtest: should get metrics
ok 14 - should get metrics
  ---
  duration_ms: 0.162416
  type: 'test'
  ...
# Subtest: should reset metrics
ok 15 - should reset metrics
  ---
  duration_ms: 0.110958
  type: 'test'
  ...
# Subtest: should get DLQ name
ok 16 - should get DLQ name
  ---
  duration_ms: 0.101166
  type: 'test'
  ...
# Subtest: should have hooks support
ok 17 - should have hooks support
  ---
  duration_ms: 0.086208
  type: 'test'
  ...
# Subtest: should support custom serializer
ok 18 - should support custom serializer
  ---
  duration_ms: 0.129625
  type: 'test'
  ...
# Subtest: should support custom deserializer
ok 19 - should support custom deserializer
  ---
  duration_ms: 0.091041
  type: 'test'
  ...
# Subtest: should support tracing configuration
ok 20 - should support tracing configuration
  ---
  duration_ms: 0.082584
  type: 'test'
  ...
# Subtest: should validate serializer
ok 21 - should validate serializer
  ---
  duration_ms: 0.049125
  type: 'test'
  ...
# Subtest: should validate deserializer
ok 22 - should validate deserializer
  ---
  duration_ms: 0.049583
  type: 'test'
  ...
# Subtest: should validate tracing config
ok 23 - should validate tracing config
  ---
  duration_ms: 0.131
  type: 'test'
  ...
# Subtest: should use default serializer
ok 24 - should use default serializer
  ---
  duration_ms: 0.099209
  type: 'test'
  ...
# Subtest: should use default deserializer
ok 25 - should use default deserializer
  ---
  duration_ms: 0.375042
  type: 'test'
  ...
# Subtest: should auto-generate trace ID when tracing enabled
ok 26 - should auto-generate trace ID when tracing enabled
  ---
  duration_ms: 0.104042
  type: 'test'
  ...
# Subtest: should use trace ID from context when available
ok 27 - should use trace ID from context when available
  ---
  duration_ms: 0.202208
  type: 'test'
  ...
# Subtest: should use trace ID from options when provided
ok 28 - should use trace ID from options when provided
  ---
  duration_ms: 0.633375
  type: 'test'
  ...
# Subtest: should support custom trace ID generator
ok 29 - should support custom trace ID generator
  ---
  duration_ms: 0.102625
  type: 'test'
  ...
# {"level":30,"time":1763483907276,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# {"level":30,"time":1763483907283,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connected to RabbitMQ"}
# {"level":30,"time":1763483907283,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Starting graceful shutdown"}
# {"level":30,"time":1763483907283,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","count":0,"msg":"Stopping consumers"}
# {"level":30,"time":1763483907284,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connection closed successfully"}
# {"level":30,"time":1763483907285,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# Subtest: should connect and disconnect
ok 30 - should connect and disconnect
  ---
  duration_ms: 19.217333
  type: 'test'
  ...
# {"level":30,"time":1763483907284,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Graceful shutdown completed"}
# {"level":30,"time":1763483907289,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connected to RabbitMQ"}
# {"level":30,"time":1763483907292,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_queue_1763483907289","consumerTag":"amq.ctag-ZlRKzSI19kB0APQ4iFm8ug","msg":"Consumer started"}
# {"level":30,"time":1763483907497,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# Subtest: should publish and consume messages
not ok 31 - should publish and consume messages
  ---
  duration_ms: 212.326208
  type: 'test'
  location: '/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/test/integration-full.test.js:53:1'
  failureType: 'testCodeFailure'
  error: |-
    Expected values to be strictly deep-equal:
    + actual - expected
    
      [
    -   'message1',
        'message2',
    +   'message2'
      ]
    
  code: 'ERR_ASSERTION'
  name: 'AssertionError'
  expected:
    0: 'message1'
    1: 'message2'
  actual:
    0: 'message2'
    1: 'message2'
  operator: 'deepStrictEqual'
  stack: |-
    TestContext.<anonymous> (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/test/integration-full.test.js:96:10)
    async Test.run (node:internal/test_runner/test:1054:7)
    async Test.processPendingSubtests (node:internal/test_runner/test:744:7)
  ...
# {"level":30,"time":1763483907509,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connected to RabbitMQ"}
# {"level":30,"time":1763483907513,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_retry_1763483907509","consumerTag":"amq.ctag-ZtMC6_T11ygzjUlgrrTJYw","msg":"Consumer started"}
# {"level":50,"time":1763483907616,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","err":{"type":"Error","message":"Simulated error","stack":"Error: Simulated error\\n    at client.consume.maxRetries (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/test/integration-full.test.js:129:15)\\n    at /Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/lib/RabbitMQClient.js:1467:17\\n    at Channel.dispatchMessage (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:489:14)\\n    at Channel.handleDelivery (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:498:17)\\n    at Channel.emit (node:events:519:28)\\n    at /Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:395:10\\n    at Channel.content (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:448:9)\\n    at Channel.acceptMessageFrame (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:232:33)\\n    at Channel.accept (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:302:19)\\n    at Connection.mainAccept [as accept] (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/connection.js:579:33)"},"queue":"test_retry_1763483907509","correlationId":"1763483907614-5b25kyegw","attempt":1,"msg":"Error processing message"}
# {"level":30,"time":1763483907617,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_retry_1763483907509","correlationId":"1763483907614-5b25kyegw","retryCount":1,"msg":"Message requeued for retry"}
# {"level":30,"time":1763483907816,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Starting graceful shutdown"}
# {"level":30,"time":1763483907816,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","count":1,"msg":"Stopping consumers"}
# {"level":30,"time":1763483907819,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_retry_1763483907509","consumerTag":"amq.ctag-ZtMC6_T11ygzjUlgrrTJYw","msg":"Consumer stopped"}
# {"level":30,"time":1763483907821,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connection closed successfully"}
# {"level":30,"time":1763483907821,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# Subtest: should handle retry on consume error
ok 32 - should handle retry on consume error
  ---
  duration_ms: 323.757834
  type: 'test'
  ...
# {"level":30,"time":1763483907821,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Graceful shutdown completed"}
# {"level":30,"time":1763483907828,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connected to RabbitMQ"}
# {"level":30,"time":1763483907841,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_dlq_1763483907828","consumerTag":"amq.ctag-8jpoPmvMF2svdXM-WZ8uQQ","msg":"Consumer started"}
# {"level":50,"time":1763483907842,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","err":{"type":"Error","message":"Always fail","stack":"Error: Always fail\\n    at client.consume.maxRetries (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/test/integration-full.test.js:182:13)\\n    at /Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/lib/RabbitMQClient.js:1467:17\\n    at Channel.dispatchMessage (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:489:14)\\n    at Channel.handleDelivery (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:498:17)\\n    at Channel.emit (node:events:519:28)\\n    at /Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:395:10\\n    at Channel.content (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:448:9)\\n    at Channel.acceptMessageFrame (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:232:33)\\n    at Channel.accept (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:302:19)\\n    at Connection.mainAccept [as accept] (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/connection.js:579:33)"},"queue":"test_dlq_1763483907828","correlationId":"1763483907841-l8dxlcb54","attempt":1,"msg":"Error processing message"}
# {"level":30,"time":1763483907842,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_dlq_1763483907828","correlationId":"1763483907841-l8dxlcb54","retryCount":1,"msg":"Message requeued for retry"}
# {"level":50,"time":1763483907843,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","err":{"type":"Error","message":"Always fail","stack":"Error: Always fail\\n    at client.consume.maxRetries (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/test/integration-full.test.js:182:13)\\n    at /Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/lib/RabbitMQClient.js:1467:17\\n    at Channel.dispatchMessage (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:489:14)\\n    at Channel.handleDelivery (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:498:17)\\n    at Channel.emit (node:events:519:28)\\n    at /Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:395:10\\n    at Channel.content (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:448:9)\\n    at Channel.acceptMessageFrame (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:232:33)\\n    at Channel.accept (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/channel.js:302:19)\\n    at Connection.mainAccept [as accept] (/Users/esurkov1/Desktop/Разработка/Packages/rabbitmq-production-ready/node_modules/amqplib/lib/connection.js:579:33)"},"queue":"test_dlq_1763483907828","correlationId":"1763483907841-l8dxlcb54","attempt":2,"msg":"Error processing message"}
# {"level":40,"time":1763483907845,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_dlq_1763483907828","correlationId":"1763483907841-l8dxlcb54","dlq":"dlq.test_dlq_1763483907828","error":"Always fail","msg":"Message sent to DLQ"}
# {"level":40,"time":1763483907845,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_dlq_1763483907828","correlationId":"1763483907841-l8dxlcb54","retryCount":1,"msg":"Message sent to DLQ"}
# {"level":30,"time":1763483908844,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Starting graceful shutdown"}
# {"level":30,"time":1763483908844,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","count":1,"msg":"Stopping consumers"}
# {"level":30,"time":1763483908845,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_dlq_1763483907828","consumerTag":"amq.ctag-8jpoPmvMF2svdXM-WZ8uQQ","msg":"Consumer stopped"}
# {"level":30,"time":1763483908846,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connection closed successfully"}
# {"level":30,"time":1763483908847,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# Subtest: should send to DLQ when retries exhausted
ok 33 - should send to DLQ when retries exhausted
  ---
  duration_ms: 1025.455875
  type: 'test'
  ...
# {"level":30,"time":1763483908846,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Graceful shutdown completed"}
# {"level":30,"time":1763483908853,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connected to RabbitMQ"}
# {"level":30,"time":1763483908855,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_metrics_1763483908853","consumerTag":"amq.ctag-eB3x2PXcMDsTJ0ncIo0dJQ","msg":"Consumer started"}
# {"level":30,"time":1763483909059,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Starting graceful shutdown"}
# {"level":30,"time":1763483909060,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","count":1,"msg":"Stopping consumers"}
# {"level":30,"time":1763483909063,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_metrics_1763483908853","consumerTag":"amq.ctag-eB3x2PXcMDsTJ0ncIo0dJQ","msg":"Consumer stopped"}
# {"level":30,"time":1763483909067,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connection closed successfully"}
# {"level":30,"time":1763483909069,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# Subtest: should collect metrics
ok 34 - should collect metrics
  ---
  duration_ms: 221.621291
  type: 'test'
  ...
# {"level":30,"time":1763483909067,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Graceful shutdown completed"}
# {"level":30,"time":1763483909080,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connected to RabbitMQ"}
# {"level":30,"time":1763483909080,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Starting graceful shutdown"}
# {"level":30,"time":1763483909080,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","count":0,"msg":"Stopping consumers"}
# {"level":30,"time":1763483909082,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connection closed successfully"}
# {"level":30,"time":1763483909084,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# Subtest: should perform health check
ok 35 - should perform health check
  ---
  duration_ms: 14.3125
  type: 'test'
  ...
# {"level":30,"time":1763483909082,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Graceful shutdown completed"}
# {"level":30,"time":1763483909093,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connected to RabbitMQ"}
# {"level":40,"time":1763483909196,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"RabbitMQ connection closed"}
# {"level":30,"time":1763483909196,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","attempt":1,"delay":100,"msg":"Scheduling reconnect"}
# {"level":30,"time":1763483909297,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# {"level":30,"time":1763483909306,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Reconnected to RabbitMQ"}
# {"level":30,"time":1763483909697,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Starting graceful shutdown"}
# {"level":30,"time":1763483909698,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","count":0,"msg":"Stopping consumers"}
# {"level":30,"time":1763483909704,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connection closed successfully"}
# {"level":30,"time":1763483909706,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# Subtest: should handle reconnection
ok 36 - should handle reconnection
  ---
  duration_ms: 621.61225
  type: 'test'
  ...
# {"level":30,"time":1763483909704,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Graceful shutdown completed"}
# {"level":30,"time":1763483909720,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connected to RabbitMQ"}
# {"level":30,"time":1763483909726,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_serializer_1763483909720","consumerTag":"amq.ctag-fnTcmLYJutzIw61iv0yx3g","msg":"Consumer started"}
# {"level":30,"time":1763483909931,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Starting graceful shutdown"}
# {"level":30,"time":1763483909931,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","count":1,"msg":"Stopping consumers"}
# {"level":30,"time":1763483909934,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_serializer_1763483909720","consumerTag":"amq.ctag-fnTcmLYJutzIw61iv0yx3g","msg":"Consumer stopped"}
# {"level":30,"time":1763483909937,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connection closed successfully"}
# {"level":30,"time":1763483909939,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# Subtest: should use custom serializer/deserializer
ok 37 - should use custom serializer/deserializer
  ---
  duration_ms: 232.628667
  type: 'test'
  ...
# {"level":30,"time":1763483909937,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Graceful shutdown completed"}
# {"level":30,"time":1763483909948,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connected to RabbitMQ"}
# {"level":30,"time":1763483909954,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_tracing_1763483909948","consumerTag":"amq.ctag-h_zToLj_nEKMYdlVaN3cfQ","msg":"Consumer started"}
# {"level":30,"time":1763483910157,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Starting graceful shutdown"}
# {"level":30,"time":1763483910158,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","count":1,"msg":"Stopping consumers"}
# {"level":30,"time":1763483910159,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_tracing_1763483909948","consumerTag":"amq.ctag-h_zToLj_nEKMYdlVaN3cfQ","msg":"Consumer stopped"}
# {"level":30,"time":1763483910161,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connection closed successfully"}
# {"level":30,"time":1763483910162,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connecting to RabbitMQ"}
# Subtest: should propagate trace ID through messages
ok 38 - should propagate trace ID through messages
  ---
  duration_ms: 224.32075
  type: 'test'
  ...
# {"level":30,"time":1763483910161,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Graceful shutdown completed"}
# {"level":30,"time":1763483910170,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connected to RabbitMQ"}
# {"level":30,"time":1763483910174,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_trace_context_1763483910170","consumerTag":"amq.ctag-D8BqI8YLt7Dd7fBS_WqTCQ","msg":"Consumer started"}
# {"level":30,"time":1763483910376,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Starting graceful shutdown"}
# {"level":30,"time":1763483910376,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","count":1,"msg":"Stopping consumers"}
# {"level":30,"time":1763483910377,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","queue":"test_trace_context_1763483910170","consumerTag":"amq.ctag-D8BqI8YLt7Dd7fBS_WqTCQ","msg":"Consumer stopped"}
# {"level":30,"time":1763483910378,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Connection closed successfully"}
# Subtest: should set trace context from message headers
ok 39 - should set trace context from message headers
  ---
  duration_ms: 216.930333
  type: 'test'
  ...
# {"level":30,"time":1763483910378,"pid":33092,"hostname":"MBP--Esurkov1.lan","name":"RabbitMQClient","msg":"Graceful shutdown completed"}
